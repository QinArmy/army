<?xml version="1.0" encoding="UTF-8" ?>
<meta_dqls dialec="postgre">
    <schema_dql>
        SELECT current_database() AS catalog, current_schema() AS schema
    </schema_dql>
    <table_dql>
        SELECT
            n.nspname     AS schema,
            c.relname     AS tableName,
            c.relkind     AS tableType,
            d.description AS comment
            FROM
                pg_catalog.pg_namespace                 n
                    LEFT JOIN pg_catalog.pg_class       c ON c.relnamespace = n.oid
                    LEFT JOIN pg_catalog.pg_description d ON c.oid = d.objoid AND d.objsubid = 0

            WHERE
                  current_database() = $1
              AND n.nspname = $2
              AND c.relkind IN ('r', 'p')
    </table_dql>
    <column_dql>
        SELECT
            a.attname                                                AS columnName,
            t.typname                                                AS dataTypeName,
            pg_catalog.pg_get_expr(def.adbin, def.adrelid)           AS defaultValue,
            NOT (a.attnotnull OR (t.typtype = 'd' AND t.typnotnull)) AS nullable,
            CASE
                WHEN t.oid = 1700 AND a.atttypmod &lt;> -1-- DECIMAL
                    THEN ((a.atttypmod - 4) &amp; -65536) >> 16
                WHEN t.oid = 16 OR t.oid = 18-- BOOLEAN OR CHAR
                    THEN 1
                WHEN (t.oid = 1042 OR t.oid = 1043) AND a.atttypmod > 4 -- BPCHAR OR VARCHAR
                    THEN a.atttypmod - 4
                WHEN t.oid = ANY (ARRAY [1082,1083,1266,1114,1184]) AND
                     a.atttypmod = -1 -- DATE,TIME,TIMETZ,TIMESTAMP,TIMESTAMPTZ
                    THEN 6
                    ELSE a.atttypmod
            END                                                      AS precision,
            CASE
                WHEN t.oid = 1700 AND a.atttypmod &lt;> -1-- DECIMAL
                    THEN ((a.atttypmod - 4) &amp; 65535)
                    ELSE a.atttypmod
            END                                                      AS scalse,
            dsc.description                                          AS comment
            FROM
                pg_catalog.pg_namespace                 n
                    JOIN      pg_catalog.pg_class       c ON c.relnamespace = n.oid
                    JOIN      pg_catalog.pg_attribute   a ON a.attrelid = c.oid
                    JOIN      pg_catalog.pg_type        t ON a.atttypid = t.oid
                    LEFT JOIN pg_catalog.pg_attrdef     def ON a.attrelid = def.adrelid AND a.attnum = def.adnum
                    LEFT JOIN pg_catalog.pg_description dsc ON c.oid = dsc.objoid AND a.attnum = dsc.objsubid
            WHERE
                  current_database() = $1
              AND n.nspname = $2
              AND c.relname = $3
              AND c.relkind IN ('r', 'p')
              AND a.attnum > 0
              AND NOT a.attisdropped
    </column_dql>
    <index_dql>
        SELECT
            tmp.tableName AS tableName,
            tmp.indexName AS indexName,
            tmp."unique"  AS "unique",
            tmp.colmnName AS colmnName,
            tmp.indexType AS indexType,
            CASE tmp.indexType
                WHEN 'btree' THEN CASE indoption[ordinalPosition - 1] &amp; 1
                                      WHEN 1 THEN FALSE
                                             ELSE TRUE
                                  END
            END           AS "asc"
            FROM
                (
                    SELECT
                        c.relname                                        AS tableName,
                        ci.relname                                       AS indexName,
                        i.indisunique                                    AS "unique",
                        am.amname                                        AS indexType,
                        trim(BOTH '"' FROM
                             pg_catalog.pg_get_indexdef(ci.oid, (information_schema._pg_expandarray(i.indkey)).n,
                                                        FALSE))          AS colmnName,
                        (information_schema._pg_expandarray(i.indkey)).n AS ordinalPosition,
                        i.indoption                                      AS indoption
                        FROM
                            pg_catalog.pg_namespace      n
                                JOIN pg_catalog.pg_class c ON c.relnamespace = n.oid
                                JOIN pg_catalog.pg_index i ON c.oid = i.indrelid
                                JOIN pg_catalog.pg_class ci ON ci.oid = i.indexrelid
                                JOIN pg_catalog.pg_am    am ON ci.relam = am.oid
                        WHERE
                              current_database() = $1
                          AND n.nspname = $2
                          AND c.relname = $3
                ) AS tmp
    </index_dql>
</meta_dqls>
